
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>plot_correlation: analyzing the correlation between columns &#8212; dataprep 0.2.9 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="plot_missing: analyzing the impact of missing values" href="plot_missing.html" />
    <link rel="prev" title="plot: analyzing basic characteristics of dataset" href="plot.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="plot_missing.html" title="plot_missing: analyzing the impact of missing values"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plot.html" title="plot: analyzing basic characteristics of dataset"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">dataprep 0.2.9 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><cite>plot_correlation</cite>: analyzing the correlation between columns</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="plot-correlation-analyzing-the-correlation-between-columns">
<h1><cite>plot_correlation</cite>: analyzing the correlation between columns<a class="headerlink" href="#plot-correlation-analyzing-the-correlation-between-columns" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The goal of <cite>plot_correlation</cite> is to analyze the correlation between columns. It provides the following functionalities:</p>
<ol class="arabic simple">
<li><p><cite>plot_correlation(df)</cite>: plot the correlation matrix of all columns.</p></li>
<li><p><cite>plot_correlation(df, x)</cite>: plot the most correlated columns to column x.</p></li>
<li><p><cite>plot_correlation(df, x, y)</cite>: plot the scatter plot between column x and column y, as well as the regression line. Besides, the point that has most impact on the correlation value could be identified by passing a parameter.</p></li>
<li><p><cite>plot_correlation(df, x, y, k, value_range)</cite>: filter the result by correlation value or by top-k.</p></li>
</ol>
<p>In the following, we use several examples to demonstrate the functionalities.</p>
</div>
<div class="section" id="loading-dataset">
<h2>Loading dataset<a class="headerlink" href="#loading-dataset" title="Permalink to this headline">¶</a></h2>
<p>We support two types of dataframe: pandas dataframe and dask dataframe. Here we load the well known <cite>wine quality</cite> dataset into a pandas dataframe and use it to demonstrate our functionality:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://www.openml.org/data/get_csv/4965268/wine-quality-red.arff&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="plotting-correlation-matrix-via-plot-correlation-df">
<h2>Plotting correlation matrix via <cite>plot_correlation(df)</cite><a class="headerlink" href="#plotting-correlation-matrix-via-plot-correlation-df" title="Permalink to this headline">¶</a></h2>
<p>After getting a dataset, we could plot the correlation matrix of all columns by calling <cite>plot_correlation(df)</cite>. We will compute three types of correlations (<a class="reference external" href="https://www.wikiwand.com/en/Pearson_correlation_coefficient">Person</a>, <a class="reference external" href="https://www.wikiwand.com/en/Spearman%27s_rank_correlation_coefficient">Spearman</a> and <a class="reference external" href="https://www.wikiwand.com/en/Kendall_rank_correlation_coefficient">KendallTau</a>) and for each of them generating a correlation matrix.  In the matrix, each cell represents the correlation value of two columns. The following shows an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataprep.eda</span> <span class="kn">import</span> <span class="n">plot_correlation</span>
<span class="n">plot_correlation</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<iframe src="../_static/images/plot_correlation/df.html" height="550" width="100%"></iframe></div>
<div class="section" id="finding-the-most-correlated-columns-via-plot-correlation-df-x">
<h2>Finding the most correlated columns via <cite>plot_correlation(df, x)</cite><a class="headerlink" href="#finding-the-most-correlated-columns-via-plot-correlation-df-x" title="Permalink to this headline">¶</a></h2>
<p>After getting the correlation matrix, user may zoom into a column and explore how other columns correlated to it. To achieve this goal, we provide <cite>plot_correlation(df, x)</cite>. It computes the correlations (<a class="reference external" href="https://www.wikiwand.com/en/Pearson_correlation_coefficient">Person</a>, <a class="reference external" href="https://www.wikiwand.com/en/Spearman%27s_rank_correlation_coefficient">Spearman</a> and <a class="reference external" href="https://www.wikiwand.com/en/Kendall_rank_correlation_coefficient">KendallTau</a>) of the interested column x to all other columns and sorting them based on the correlation values. In this case, user could know which column is most correlated or un-correlated to column x. The following shows an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot_correlation</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;alcohol&quot;</span><span class="p">)</span>
</pre></div>
</div>
<iframe src="../_static/images/plot_correlation/df_num.html" height="550" width="100%"></iframe></div>
<div class="section" id="exploring-the-correlation-between-two-columns-via-plot-correlation-df-x-y">
<h2>Exploring the correlation between two columns via <cite>plot_correlation(df, x, y)</cite><a class="headerlink" href="#exploring-the-correlation-between-two-columns-via-plot-correlation-df-x-y" title="Permalink to this headline">¶</a></h2>
<p>Furthermore, we provide <cite>plot_correlation(df, x, y)</cite> to allow user analyze the correlation between two columns. It plots a scatter plot of column x and y, along with a regression line. The following shows an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot_correlation</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;alcohol&quot;</span><span class="p">,</span> <span class="s2">&quot;pH&quot;</span><span class="p">)</span>
</pre></div>
</div>
<iframe src="../_static/images/plot_correlation/df_num_num.html" height="550" width="100%"></iframe><p>Besides, when user passes the parameter k, it could identify the k points that have the largest impact on the correlation value. The impact means that after removing the k points, the correlation value will increase most (positive influence) or decrease most (negative influence). The following shows an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot_correlation</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;alcohol&quot;</span><span class="p">,</span> <span class="s2">&quot;pH&quot;</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<iframe src="../_static/images/plot_correlation/df_num_num_k.html" height="550" width="100%"></iframe></div>
<div class="section" id="filtering-the-result-by-top-k-and-value-range-filter">
<h2>Filtering the result by top-k and value range filter<a class="headerlink" href="#filtering-the-result-by-top-k-and-value-range-filter" title="Permalink to this headline">¶</a></h2>
<p>We provide two types of filters to filter the result: top-k and value range. They could be applied to <cite>plot_correlation(df)</cite> and <cite>plot_correlation(df, x)</cite> by passing parameter <cite>k</cite> and <cite>value_range</cite>. After applying top-k filter, only the top-k correlation values will be shown. For value range filter, only the the correlation value in a given range will be shown.</p>
<p>The following shows an example of applying top-k filter in <cite>plot_correlation(df)</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot_correlation</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<iframe src="../_static/images/plot_correlation/df_k.html" height="550" width="100%"></iframe><p>The following shows an example of applying value range filter in <cite>plot_correlation(df, x)</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot_correlation</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;alcohol&quot;</span><span class="p">,</span> <span class="n">value_range</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<iframe src="../_static/images/plot_correlation/df_num_valueRange.html" height="550" width="100%"></iframe></div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><cite>plot_correlation</cite>: analyzing the correlation between columns</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#loading-dataset">Loading dataset</a></li>
<li><a class="reference internal" href="#plotting-correlation-matrix-via-plot-correlation-df">Plotting correlation matrix via <cite>plot_correlation(df)</cite></a></li>
<li><a class="reference internal" href="#finding-the-most-correlated-columns-via-plot-correlation-df-x">Finding the most correlated columns via <cite>plot_correlation(df, x)</cite></a></li>
<li><a class="reference internal" href="#exploring-the-correlation-between-two-columns-via-plot-correlation-df-x-y">Exploring the correlation between two columns via <cite>plot_correlation(df, x, y)</cite></a></li>
<li><a class="reference internal" href="#filtering-the-result-by-top-k-and-value-range-filter">Filtering the result by top-k and value range filter</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="plot.html"
                        title="previous chapter"><cite>plot</cite>: analyzing basic characteristics of dataset</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="plot_missing.html"
                        title="next chapter"><em>plot_missing</em>: analyzing the impact of missing values</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/eda/plot_correlation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="plot_missing.html" title="plot_missing: analyzing the impact of missing values"
             >next</a> |</li>
        <li class="right" >
          <a href="plot.html" title="plot: analyzing basic characteristics of dataset"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">dataprep 0.2.9 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><cite>plot_correlation</cite>: analyzing the correlation between columns</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, SFU Database System Lab.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
  </body>
</html>